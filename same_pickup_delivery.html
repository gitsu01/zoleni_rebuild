<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi Dropoff - Zoleni</title>
    <link rel="stylesheet" href="css/pages_style.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="top_sidebar flex_align">
            <a href="./index.html">
                <img src="./images/zoleni_logo.png" alt="#">
            </a>
            <i class="bi bi-x-lg" id="close_menu"></i>
        </div>
        <ul class="middle_sidebar">
            <li class="sidebar_item">
                <a href="./concierge_delivery.html" class="flex_align">
                    <img src="./images/icons/Front_Desk.svg" alt="Home">
                    Concierge
                </a>
            </li>
            <li class="sidebar_item">
                <div id="delivery" class="flex_align sidebar_d_items">
                    <img src="./images/icons/Delivery.svg" alt="Home">
                    Delivery
                    <i class="bi bi-chevron-down"></i>
                </div>
                <ul id="delivery_list">
                    <li><a href="./now_delivery.html">Now</a></li>
                    <li><a href="./schedule_delivery.html">Schedule</a></li>
                    <li><a href="./ongoing_delivery.html">Ongoing</a></li>
                    <li><a href="./sameday_delivery.html">Same Day</a></li>
                    <li><a href="./same_pickup_delivery.html">Multi Order - Same Pickup</a></li>
                    <li><a href="./same_dropoff_delivery.html">Multi Order - Same Dropoff</a></li>
                    <li><a href="./interactive_delivery.html">Interactive Delivery</a></li>
                </ul>
            </li>
            <li class="sidebar_item">
                <div id="moving" class="flex_align sidebar_d_items">
                    <img src="./images/icons/Heavy.svg" alt="Home">
                    Moving
                    <i class="bi bi-chevron-down"></i>
                </div>
                <ul id="moving_list">
                    <li><a href="./now_moving.html">Booking Now</a></li>
                    <li><a href="moving_business_directory.html">Business Directory</a></li>
                </ul>
            </li>
            <li class="sidebar_item">
                <div id="storage" class="flex_align sidebar_d_items">
                    <img src="./images/icons/Storage.svg" alt="Home">
                    Storage
                    <i class="bi bi-chevron-down"></i>
                </div>
                <ul id="storage_list">
                    <li><a href="storage_booking_now.html">Booking Now</a></li>
                    <li><a href="storage_business_directory.html">Business Directory</a></li>
                </ul>
            </li>
            <li class="sidebar_item">
                <div id="ship" class="flex_align sidebar_d_items">
                    <img src="./images/icons/In_Transit.svg" alt="Home">
                    Ship
                    <i class="bi bi-chevron-down"></i>
                </div>
                <ul id="ship_list">
                    <li><a href="shipping_business_directory.html">Business Directory</a></li>
                </ul>
            </li>
            <li class="sidebar_item">
                <div id="gig" class="flex_align sidebar_d_items">
                    <img src="./images/icons/Opened_Folder.svg" alt="Home">
                    Gig Pro
                    <i class="bi bi-chevron-down"></i>
                </div>
                <ul id="gig_list">
                    <li><a href="gig_pro_business_directory.html">Business Directory</a></li>
                </ul>
            </li>
            <li class="sidebar_item">
                <div id="quote" class="flex_align sidebar_d_items">
                    <img src="./images/icons/Quote.svg" alt="Home">
                    Quote Rate
                    <i class="bi bi-chevron-down"></i>
                </div>
                <ul id="quote_list">
                    <li><a href="./delivery_quote_rate.html">Delivery</a></li>
                    <li><a href="./interactive_delivery_quote_rate.html">Interactive Delivery</a></li>
                    <li><a href="./moving_quote_rate.html">Moving</a></li>
                    <li><a href="./storage_quote_rate.html">Storage</a></li>
                    <li><a href="./ship_quote_rate.html">Ship</a></li>
                </ul>
            </li>
            <li class="sidebar_item">
                <div id="lead_net" class="flex_align sidebar_d_items">
                    <img src="./images/icons/Network.png" alt="Home">
                    Lead Network
                    <i class="bi bi-chevron-down"></i>
                </div>
                <ul id="lead_net_list">
                    <li><a href="moving_lead.html">Moving</a></li>
                    <li><a href="storage_lead.html">Storage</a></li>
                    <li><a href="shipping_lead.html">Ship</a></li>
                </ul>
            </li>
        </ul>
        <div class="bottom_sidebar flex_align">
            <a href="./contact.html">
                <button class="btn_sec">
                    <i class="bi bi-question"></i>
                    Help
                </button>
            </a>
            <button class="btn_pri" id="sidebar_login_btn">
                Login
            </button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login_model" class="login_box flex_align">        
        <div id="close_l_model" class="flex_align">
            <i class="bi bi-x-lg" ></i>
        </div>
        <form class="f_s_l">
            <div class="text_c">
                <h2>Welcome Back</h2>
                <p>Lorem ipsum dolor sit amet elit. Sunt omnis fugiat velit libero?</p>
            </div>
            <div class="inputs">
                <input type="email" name="log_email" id="log_email" placeholder="Email Address"> 
                <input type="password" name="log_pass" id="log_pass" placeholder="Password">
            </div>
            <button class="btn_pri" type="submit">Login</button>
        </form>
        <div class="other_op">
            <h2>Sign Up With</h2>
            <div class="logos flex_align">
                <a href="#">
                    <img src="./images/icons/Google.svg" alt="google">
                </a>
                <a href="#">
                    <img src="./images/icons/Facebook.svg" alt="google">
                </a>
                <a href="#">
                    <img src="./images/icons/Apple Logo.svg" alt="google">
                </a>
                <a href="#">
                    <img src="./images/icons/Amazon.svg" alt="google">
                </a>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="container header flex_align">
        <div class="left_header">
            <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-list" id="open_menu" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>
            </svg>
            <a id="main_logo" href="./index.html">
                <img src="./images/zoleni_logo.png" alt="zoleni.com">
            </a>
        </div>
        <div class="right_header flex_align">
            <div class="select_box">
                <select name="country" id="country">
                    <option value="can">Toronto</option>
                </select>   
                <div class="icon_container">
                    <i class="bi bi-chevron-down"></i>
                </div>             
            </div>
            <div class="select_box">
                <select name="currency" id="currency">
                    <option value="CAD">CAD</option>
                    <option value="USD">USD</option>
                </select>                
                <div class="icon_container">
                    <i class="bi bi-chevron-down"></i>
                </div> 
            </div> 
            <a href="contact_us.html">
                <button class="btn_pri">
                    Help
                </button>
            </a>
            
            <button class="btn_pri" id="login_btn">
                Login
            </button>
            <button class="btn_sec" id="local_time">
                00:00:00
            </button>  
        </div>
    </header>

    <!-- Title Section-->
    <div class="container page_title_sec">
        <div class="slug">
            <a href="../index.html" class="slug_item">Home</a>
            <span class="slug_item">></span>
            <a href="./same_pickup.html" class="slug_item">Multi_Dropoff</a>
        </div>
        <h2 class="page_title">MULTI DROPOFF DELIVERY</h2>
    </div>

    <!-- Input Section -->
    <div class="container page_inp_sec">
        <div class="right_inp_sec">
            <div class="date&time">
                <h3 class="inp_sec_title">Setect Date and Time</h3>
                <div class="full_inp_sec gap_0">
                    <input type="date" name="dare" id="dare">
                    <select class="select" name="inte_dtime" id="inte_dtime">
                        <option value="">Time</option>
                    </select>
                </div>
            </div>
            <div class="pickup_details">
                <h3 class="inp_sec_title">Pickup Details</h3>
                <input type="text" name="sender_name" id="sender_name" class="page_inp" placeholder="Type Your Address">
                <div class="full_inp_sec gap_0">
                    <div class="half_inp">
                        <input type="text" name="sender_name" id="sender_name" class="page_inp" placeholder="Contact Name">
                        <input type="email" name="sender_email" id="sender_email" class="page_inp" placeholder="Unit/Suite Number">
                    </div>
                    <div class="half_inp">
                        <input type="text" name="receiver_name" id="receiver_name" class="page_inp" placeholder="Contact Number">
                        <input type="enail" name="receiver_email" id="receiver_email" class="page_inp" placeholder="Address Instruction">
                    </div>
                </div>
                <div class="half_inp">
                    <select class="select" name="s_tower_build" id="s_tower_build">
                        <option value="">Is it a tower building</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
            </div> 
            <div class="dropoff_details multi_pd">
                <h3 class="inp_sec_title">Dropoff Details</h3>
                <button class="btn_sec" onclick="func_add_dropoff()">Add Dropoff Location</button>
            </div>            
            <div class="full_inp_sec users_det">
                <div class="half_inp driver_tip">
                    <h3 class="inp_sec_title">Driver Tip</h3>
                    <input type="number" name="receiver_name" id="receiver_name" class="page_inp" placeholder="Enter a tip amount [ $0 to infinity ]">
                </div>
            </div>
            <button class="page_main_btn" type="submit">Continue</button>
        </div>
    </div>

    <!-- Popup Page -->
    <div id="multi_pickup" class="page_popup">
        <i id="close_popup" class="bi bi-x-lg" onclick="func_remove_dropoff()" ></i>
        <h3 class="popup_title">Multiple Pickup Locations</h3>
        <button class="btn_pri" style="margin-top: 15px;" onclick="show_add_dropoff()" >Add New Pickup</button>
        <table>
            <thead>
                <tr>
                    <th>Contact Name</th>
                    <th>Pickup Address</th>
                    <th>Package</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="dropoff_details">
                
            </tbody>
        </table>
    </div>

    <div id="add_multi_pickup" class="page_popup">
        <i id="close_popup" class="bi bi-x-lg" onclick="func_remove_add_dropoff()" ></i>
        <h3 class="popup_title">Add Pickup Details</h3>
        <form id="pickup_form" style="margin-top: 15px;">
            <div class="pickup_details">
                <h3 class="inp_sec_title">Pickup Details</h3>
                <input type="text" name="drop_adddress" id="drop_adddress" class="page_inp" placeholder="Type Your Address">
                <div class="full_inp_sec gap_0">
                    <div class="half_inp">
                        <input type="text" name="drop_name" id="drop_name" class="page_inp" placeholder="Contact Name">
                        <input type="number" name="drop_unit" id="drop_unit" class="page_inp" placeholder="Unit/Suite Number">
                    </div>
                    <div class="half_inp">
                        <input type="number" name="drop_number" id="drop_number" class="page_inp" placeholder="Contact Number">
                        <input type="text" name="drop_add_ins" id="drop_add_ins" class="page_inp" placeholder="Address Instruction">
                    </div>
                </div>
                <div class="half_inp">
                    <select class="select" name="drop_tower" id="drop_tower">
                        <option value="">Is it a tower building</option>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
            </div>
            <div class="pack_info">
                <div class="ist_sec">
                    <h3 class="inp_sec_title">Package Information</h3>
                    <button type="button" id="add_package">
                        <i class="bi bi-plus-lg"></i>
                        Add Package
                    </button>
                </div>
                <div id="package_sec">
                    <div class="package_item full_inp_sec gap_0 " _uid="0">
                        <select class="select package_type" name="package_type" id="package_type"></select>
                        <select class="select package_quantity" name="package_quantity" id="package_quantity"></select>
                    </div>
                </div>                
            </div>
            <div class="half_inp insurance">
                <h3 class="inp_sec_title">Insurance</h3>
                <select class="select" name="ins_type" id="ins_type"></select>
            </div>
            <button type="submit" class="btn_pri">Submit</button>
        </form>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container top_footer">
            <div class="foot_item com_desc">
                <div>
                    <a href="index.html">
                        <img src="images/zoleni_logo.png" alt="logo" height="35px">
                    </a>
                    <p>
                        Zoleni is an innovative online marketplace connecting customers with delivery, moving, concierge, and storage services. Our mission is to modernize and optimize these industries through technology. 
                    </p>
                </div>
                <button class="btn_pri download_btn">Download App</button>
            </div>
            <div class="foot_item">
                <h4>Helpful Links</h4>
                <ul>
                    <li><a href="about_us.html">About Us</a></li>
                    <li><a href="contact_us.html">Contact Us</a></li>
                    <li><a href="FAQ.html">FAQs</a></li>
                    <li><a href="term_condition.html">Tearms</a></li>
                </ul>
            </div>
            <div class="foot_item">
                <h4>Account Links</h4>
                <ul>
                    <li><a href="customer_registration.html">Customer</a></li>
                    <li><a href="driver_registration.html">Driver</a></li>
                    <li><a href="corporate_registration.html">Corporate</a></li>
                </ul>
            </div>
            <div class="foot_item newslatter">
                <div>
                    <h4 style="padding-bottom: 8px;">Sign Up to News Later</h4>
                    <p>Subscribe our newsletter for get notification <br>about information & discount.</p>
                </div>
                <div class="newslatter_box">
                    <input type="email" name="email" id="news_email" placeholder="Enter Your Email">
                    <button class="btn_pri news_btn">Subscribe</button>
                </div>
            </div>
        </div>
        <hr>
        <div class="bottom_footer flex_align container">
            <p>All rights reserved with Zoleni.com</p>
            <div class="payments flex_align">
                <img src="./images/payment-img1.png" alt="pay">
                <img src="./images/payment-img2.png" alt="pay">
                <img src="./images/payment-img3.png" alt="pay">
                <img src="./images/payment-img4.png" alt="pay">
                <img src="./images/payment-img5.png" alt="pay">
            </div>
        </div>
    </footer>

    <script>      
        
        
        let pickup_info = new Array();
        let pickup_form = document.getElementById('pickup_form');
        pickup_form.addEventListener('submit', (e) => {
            e.preventDefault();
            let _uid = Math.floor(Math.random() * 1000000);
            let drop_adddress = document.getElementById('drop_adddress').value,dropoff_details
                drop_name = document.getElementById('drop_name').value,
                drop_number = document.getElementById('drop_number').value,
                drop_unit = document.getElementById('drop_unit').value,
                drop_add_ins = document.getElementById('drop_add_ins').value,
                drop_tower = document.getElementById('drop_tower').value;

            let ins_type = document.getElementById('ins_type').value;
            let package_info = [];

            let package_items = document.querySelectorAll('.package_item select');
            
            for (let i = 0; i < package_items.length; i += 2) {
                let type = package_items[i].value;
                let quan = package_items[i+1].value;
                let obj = [
                    type,
                    quan
                ]
                package_info.push(obj);
            }
            
            let pickup_item = new Object({
                _uid: _uid,
                name: drop_name,
                number: drop_number,
                unit: drop_unit,
                address: drop_adddress,
                add_ins: drop_add_ins,
                tower: drop_tower,
                package_info: package_info,
                insurance: ins_type
            });

            pickup_info.push(pickup_item)
            str_pickup_info = JSON.stringify(pickup_info);
            localStorage.setItem('dropoff_info', str_pickup_info);
            
            pickup_form.reset();
            func_remove_add_dropoff();
            show_drop_details();
            
        })

        function show_drop_details(){
            let dropoff_details = document.getElementById('dropoff_details');
            let data = JSON.parse(localStorage.getItem('dropoff_info'));
            if(data){
                let data_elm = '';
                for (let i = 0; i < data.length; i++) {
                    elm = `
                        <tr id="${data[i]._uid}">
                            <td>${data[i].name}</td>
                            <td>${data[i].address}</td>
                            <td>
                                ${
                                    data[i].package_info
                                }
                            </td>
                            <td>
                                <i onclick="edit_drop_item(${data[i]._uid})" class="tbl_btn bi bi-pen-fill"></i>
                                <i onclick="delete_drop_item(${data[i]._uid})" class="tbl_btn bi bi-trash3-fill"></i>
                            </td>
                        </tr>
                    `;
                    data_elm += elm;                    
                }
                dropoff_details.innerHTML = data_elm;
            }
            
        }

        function edit_drop_item(_id) {
            let data = JSON.parse(localStorage.getItem('dropoff_info'));
            let item = data.find(x => x._uid === _id);
            console.log(item);

            if(item){
                show_add_dropoff();
                document.getElementById('drop_adddress').value = item.address;
                document.getElementById('drop_name').value = item.name;
                document.getElementById('drop_number').value = item.number;
                document.getElementById('drop_unit').value = item.unit;
                document.getElementById('drop_add_ins').value = item.add_ins;
                document.getElementById('drop_tower').value = item.tower;
                document.getElementById('ins_type').value = item.insurance;

                let package = item.package_info;
                console.log(package);
                let package_type = document.querySelectorAll('.package_type')
                let package_quantity = document.querySelectorAll('.package_quantity')
                for (let i = 0; i < package.length; i++) {
                    let it = package[i];
                    console.log(it);                 
                }
            }

        }

        function delete_drop_item(_id) {
            let item = document.getElementById(_id);
            item.remove();
            let data = JSON.parse(localStorage.getItem('dropoff_info'));
            console.log(data);
        }
        
        let multi_pickup = document.getElementById('multi_pickup');
        function func_add_dropoff() {
            multi_pickup.classList.add('show')
            show_drop_details();
        }
        function func_remove_dropoff() {
            multi_pickup.classList.remove('show')
        }
        
        let add_multi_pickup = document.getElementById('add_multi_pickup');
        function show_add_dropoff() {
            add_multi_pickup.classList.add('show')
        }
        function func_remove_add_dropoff() {
            add_multi_pickup.classList.remove('show')
        }

        
    </script>
    <script src="js/pages_funcion.js"></script>
    <script src="js/index.js"></script>
    
</body>
</html>